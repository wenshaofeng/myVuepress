(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{281:function(s,a,t){"use strict";t.r(a);var e=t(28),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"github多账户及ssh密钥配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github多账户及ssh密钥配置"}},[s._v("#")]),s._v(" github多账户及SSH密钥配置")]),s._v(" "),t("ul",[t("li",[s._v("创建秘钥")]),s._v(" "),t("li",[s._v("秘钥管理")]),s._v(" "),t("li",[s._v("删除 git 全局的用户信息，在每次初次进入不同账号的 git 项目时，设置用户信息")])]),s._v(" "),t("h3",{attrs:{id:"创建秘钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建秘钥"}},[s._v("#")]),s._v(" 创建秘钥")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ssh-keygen -t rsa -b "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your_email@example.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\nssh-keygen -t rsa -b "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -f ~/.ssh/id_rsa.github -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your_email@example.com"')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"ssh权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh权限"}},[s._v("#")]),s._v(" ssh权限")]),s._v(" "),t("p",[s._v("为了让私钥文件和公钥文件能够在认证中起作用，请确保权限正确。")]),s._v(" "),t("p",[s._v("对于.ssh 以及父文件夹，当前用户用户一定要有执行权限，其他用户最多只能有执行权限。")]),s._v(" "),t("p",[s._v("对于公钥和私钥文件也是: 当前用户一定要有执行权限，其他用户最多只能有执行权限。")]),s._v(" "),t("p",[s._v("对于利用公钥登录，对其他用户配置执行权限是没有问题的。但是对于git，公钥和私钥, 以及config等相关文件的权限，其他用户不可有任何权限。")]),s._v(" "),t("h4",{attrs:{id:"设置免秘钥登录后，仍然不能免秘钥登录的问题。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置免秘钥登录后，仍然不能免秘钥登录的问题。"}},[s._v("#")]),s._v(" 设置免秘钥登录后，仍然不能免秘钥登录的问题。")]),s._v(" "),t("p",[s._v("因为sshd为了安全，对属主的目录和文件权限有所要求。如果权限不对，则ssh的免密码登陆不生效。\n用户目录权限为 755 或者 700，就是不能是77x、777，需要保障other用户不能有w权限\n.ssh目录权限一般为755或者700。\nrsa_id.pub 及authorized_keys权限一般为644\nrsa_id权限必须为600")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("p",[s._v(".ssh目录权限")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("drwx------   2 root root       4096 Apr  9  2015 .ssh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v(".ssh目录下文件的权限")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-rw-r--r--   1 root root 1609 Mar  2 14:05 authorized_keys\n-rw-------   1 root root 1675 Dec 12  2014 id_rsa\n-rw-r--r--   1 root root  405 Dec 12  2014 id_rsa.pub\n-rw-r--r--   1 root root 4701 May 25  2016 known_hosts\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("这里的权限指的是对端的权限，如从A主机 通过ssh连接 B主机，B主机权限按照上边的设置进行。")]),s._v(" "),t("ul",[t("li",[s._v("常见的权限表示形式")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("-rw------- (600)      只有拥有者有读写权限。\n-rw-r--r-- (644)      只有拥有者有读写权限；而属组用户和其他用户只有读权限。\n-rwx------ (700)     只有拥有者有读、写、执行权限。\n-rwxr-xr-x (755)    拥有者有读、写、执行权限；而属组用户和其他用户只有读、执行权限。\n-rwx--x--x (711)    拥有者有读、写、执行权限；而属组用户和其他用户只有执行权限。\n-rw-rw-rw- (666)   所有用户都有文件读、写权限。\n-rwxrwxrwx (777)  所有用户都有读、写、执行权限。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"秘钥管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#秘钥管理"}},[s._v("#")]),s._v(" 秘钥管理")]),s._v(" "),t("p",[s._v("配置"),t("code",[s._v("~/.ssh/config")]),s._v("文件，如果没有该文件，通过"),t("code",[s._v("touch config")]),s._v("命令创建。注意"),t("code",[s._v("HostName github.com")])]),s._v(" "),t("div",{staticClass:"language-config line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Host github.com\n  HostName github.com\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/new_id_rsa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("把私钥添加到ssh-agent并存入keychain，执行命令会要求你输入密码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ssh-add -K ~/.ssh/new_id_rsa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 GitHub 上添加公钥")]),s._v(" "),t("p",[s._v("测试\n"),t("code",[s._v("ssh -T git@github.com")])]),s._v(" "),t("h4",{attrs:{id:"多个秘钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多个秘钥"}},[s._v("#")]),s._v(" 多个秘钥")]),s._v(" "),t("p",[s._v("修改 config")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Host old.github.com\n  HostName github.com\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/old_id_rsa\n\nHost new.github.com\n  HostName github.com\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/new_id_rsa\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("测试"),t("code",[s._v("old.github.com")])]),s._v(" "),t("p",[t("code",[s._v("ssh -T git@old.github.com")])]),s._v(" "),t("p",[s._v("测试"),t("code",[s._v("new.github.com")])]),s._v(" "),t("p",[t("code",[s._v("ssh -T git@new.github.com")])]),s._v(" "),t("h3",{attrs:{id:"用户信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户信息"}},[s._v("#")]),s._v(" 用户信息")]),s._v(" "),t("p",[s._v("使用需要注意，git@后要改为对应账户的别名。\n如new_id_rsa密钥对应的GitHub账户上有个仓库test.git，且你的GitHub用户名是username，使用下面命令克隆")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git clone git@new.github.com:username/test.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如old_id_rsa密钥对应的GitHub账户上有个仓库test.git，且你的GitHub用户名是oldman，使用下面命令克隆")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git clone git@old.github.com:oldman/test.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("避免git错用密钥，把git全局的用户名和邮箱删除")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("git config --global --unset user.email\ngit config --global --unset user.name\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("删除后，以后进入每个仓库都要指定该仓库局部的"),t("code",[s._v("user.mail")]),s._v("和"),t("code",[s._v("user.name")]),s._v("。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('git config  user.email "you@example.com"\ngit config  user.name "Your Name"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"连接多个远程服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接多个远程服务器"}},[s._v("#")]),s._v(" 连接多个远程服务器")]),s._v(" "),t("p",[s._v("一个改动推送到多个远程仓库去，比如一个开源项目，既想发布到 GitHub 又想发布到国内的码云上。")]),s._v(" "),t("ul",[t("li",[s._v("添加远程仓库地址，通过不同的地址推送到不同的远程")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote -v\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" github https://github.com/78778443/gittest.git\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push github\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u github \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("一个仓库多个地址，一条推送命令就可以往两个地址推送")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url --add origin https://github.com/78778443/gittest.git\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),t("ol",[t("li",[s._v("新增多个远程仓库，不同的仓库配置不同的仓库地址")]),s._v(" "),t("li",[s._v("新增多个远程仓库地址，把多个远程仓库地址放到一个仓库中")])]),s._v(" "),t("h2",{attrs:{id:"远程出错需要覆盖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#远程出错需要覆盖"}},[s._v("#")]),s._v(" 远程出错需要覆盖")]),s._v(" "),t("ol",[t("li",[s._v("代码覆盖")]),s._v(" "),t("li",[s._v("记录覆盖 （"),t("code",[s._v("git reset <hash值> && git push -f")]),s._v("）")])]),s._v(" "),t("h3",{attrs:{id:"强制推送的权限问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#强制推送的权限问题"}},[s._v("#")]),s._v(" 强制推送的权限问题")]),s._v(" "),t("p",[s._v("Git 默认情况下允许强制推送，但这样也有可能造成一些安全隐患，比如某个开发者做了一些操作，不想让其他人知道，他就可以使用强制推送的特点来抹掉痕迹，或者直接将整个远程仓库代码恢复到初始化的状态等问题。")]),s._v(" "),t("p",[s._v("一般可以在搭建的git服务器上配置")])])}),[],!1,null,null,null);a.default=n.exports}}]);