(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{352:function(s,a,t){"use strict";t.r(a);var n=t(28),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"搭建开发环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建开发环境"}},[s._v("#")]),s._v(" 搭建开发环境")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://images.weserv.nl/?url=https://upload-images.jianshu.io/upload_images/9249356-e6165d4c343e5316.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240",alt:""}})]),s._v(" "),t("p",[s._v("搭建开发环境的目的：在本地开启一个服务器启动项目，模拟线上运行环境")]),s._v(" "),t("h2",{attrs:{id:"什么是clean-plugin和-watch-mode？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是clean-plugin和-watch-mode？"}},[s._v("#")]),s._v(" 什么是"),t("code",[s._v("Clean Plugin")]),s._v("和 "),t("code",[s._v("Watch Mode")]),s._v("？")]),s._v(" "),t("p",[s._v("在实际开发中，由于需求变化，会经常改动代码，然后用 "),t("code",[s._v("webpack")]),s._v(" 进行打包发布。由于改动过多，我们"),t("code",[s._v("/dist/")]),s._v("目录中会有很多版本的代码堆积在一起，乱七八糟。"),t("code",[s._v("webpack")]),s._v(" 会生成文件，然后将这些文件放置在 "),t("code",[s._v("/dist")]),s._v(" 文件夹中，但是 "),t("code",[s._v("webpack")]),s._v(" 无法追踪到哪些文件是实际在项目中用到的。")]),s._v(" "),t("p",[s._v("为了让打包目录更简洁，这时候需要"),t("code",[s._v("Clean Plugin")]),s._v("，在每次打包前，自动清理"),t("code",[s._v("/dist/")]),s._v("目录下的文件,这样只会生成用到的文件。")]),s._v(" "),t("p",[s._v("除此之外，借助 "),t("code",[s._v("webpack")]),s._v(" 命令本身的命令参数，可以开启"),t("code",[s._v("Watch Mode")]),s._v("：监察你的所有文件,任一文件有所变动,它就会立刻重新自动打包。")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.html"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        template"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./index.html"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        chunks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"app"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CleanWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//每次打包前清除指定文件夹下的文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("CleanWebpackPlugin")]),s._v("参数传入数组，其中每个元素是每次需要清空的文件目录。\nCMD 运行 "),t("code",[s._v("webpack -w --progress --display-reasons --color")]),s._v(": 开启watch模式, 并且可以清晰地看到打包过程")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("注意")]),s._v("：应该把"),t("code",[s._v("CleanWebpackPlugin")]),s._v("放在"),t("code",[s._v("plugin")]),s._v("配置项的"),t("strong",[s._v("最后一个")]),s._v("，因为 webpack 配置是"),t("strong",[s._v("倒序")]),s._v("的（最后配置的最先执行）。以保证每次正式打包前，先清空原来遗留的打包文件。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://images.weserv.nl/?url=https://upload-images.jianshu.io/upload_images/9249356-1cc83c98f4755590.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240",alt:""}})]),s._v(" "),t("p",[s._v("执行"),t("code",[s._v("webpack")]),s._v("打包，在控制台会首先输出一段关于相关文件夹已经清空的的提示，")]),s._v(" "),t("p",[t("code",[s._v("watch Mode")]),s._v(" 下 , 虽然可以监听文件的变更重新打包，但是"),t("code",[s._v("CleanWebpackPlugin")]),s._v(" 只会在最开始打包的那一次清除"),t("code",[s._v("/dist/")]),s._v("目录下上一次打包的文件，后续变更时,"),t("code",[s._v("/dist/")]),s._v("还是会产生多余的文件")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://images.weserv.nl/?url=https://upload-images.jianshu.io/upload_images/9249356-2263cf6aee6ffdd3.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"附"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附"}},[s._v("#")]),s._v(" 附")]),s._v(" "),t("p",[s._v("如果配置文件在 "),t("code",[s._v("build")]),s._v(" 目录内，那么 "),t("code",[s._v("new CleanWebpackPlugin(['../dist'])")]),s._v(" ，会提示 dist is outside of the project root，因为 "),t("code",[s._v("CleanWebpackPlugin")]),s._v(" 插件会认为 "),t("code",[s._v("webpack.config.js")]),s._v(" 所在的目录为项目的根目录。这时需要为 "),t("code",[s._v("CleanWebpackPlugin")]),s._v("传第二个参数：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CleanWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置root")]),s._v("\n    verbose"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);